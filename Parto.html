<htmlform>
<script type="text/javascript">
beforeSubmit.push(function() {
	setValue('RellConf.value', false);
	setValue('RellRevi.value', false);
	setValue('RellReviUrg.value', false);

	if (getValue('Rev.value')==205 ) {
		setValue('RellConf.value', true);
		return true;
	}
	else if(getValue('Rev.value')==206) {
		setValue('RellRevi.value', true);
		return true;
	}
	else if(getValue('Rev.value')==207) {
		setValue('RellReviUrg.value', true);
		return true;
	}
	else{
		return true;
	}
});
</script>

<!-- Autogenerated example form (template from 01-Nov-2010 -->
<macros>
	paperFormId = (Fill this in)
	headerColor =#009d8e
	fontOnHeaderColor = white
</macros>
<style>
.section {
	border: 1px solid $headerColor;
	padding: 2px;
	text-align: left;
	margin-bottom: 1em;
}
.sectionHeader {
	background-color: $headerColor;
	color: $fontOnHeaderColor;
	display: block;
	padding: 2px;
	font-weight: bold;
}
table.baseline-aligned td {
	vertical-align: baseline;
}
#hidden {
	visibility: hidden;
}
</style>

<includeIf velocityTest="$user.getAllRoles().toString().contains('Provider')">
      <script type="text/javascript">
         if(jQuery){
            $j(function() {
               $j("span.obsToDisableAll").find("textarea").attr("readonly", true);
               $j("span.obsToDisableAll").find("input[type=text]").attr("readonly", true);
               $j("span.obsToDisableAll").find("input[type=checkbox]").click(function(){return false;});
               $j("span.obsToDisableAll").find("input[type=radio]").click(function(){return false;});
               $j("span.obsToDisableAll").find("input.hasDatepicker").attr("disabled", true);
               $j("span.obsToDisableAll").find("select option").not(":selected").remove();
               $j("fieldset.obsToDisableAll").find("input").click(function(){return false;});
            });
         }
       </script>
  </includeIf>

  <includeIf velocityTest="$user.getAllRoles().toString().contains('Especialista')">
      <script type="text/javascript">
         if(jQuery){
            $j(function() {
               $j("span.obsToDisableEsp").find("textarea").attr("readonly", true);
               $j("span.obsToDisableEsp").find("input[type=text]").attr("readonly", true);
               $j("span.obsToDisableEsp").find("input[type=checkbox]").click(function(){return false;});
               $j("span.obsToDisableEsp").find("input[type=radio]").click(function(){return false;});
               $j("span.obsToDisableEsp").find("input.hasDatepicker").attr("disabled", true);
               $j("span.obsToDisableEsp").find("select option").not(":selected").remove();
               $j("fieldset.obsToDisableEsp").find("input").click(function(){return false;});
            });
         }
       </script>
  </includeIf>

<span style="float:right">Paper Form ID: $paperFormId</span>
<h2>Parto</h2>
<h4><obs conceptId="208" labelText="Estado de la Revision" id="Rev" style="dropdown" defaultValue="206"/></h4>
<obs conceptId="205" style="checkbox" class="hidden" id="RellConf"/>
<obs conceptId="206" style="checkbox" class="hidden" id="RellRevi"/>
<obs conceptId="207" style="checkbox" class="hidden" id="RellReviUrg"/>
<section headerLabel="1. Detalles Encuentro">
	<table class="baseline-aligned">
		<tr>
			<td>Dia:</td>
			<td><encounterDate default="today"/></td>
			<td>Codigo de Cribado: </td>
			<td><lookup class="value" expression="personAttributes.get('cribado')"/></td>
			<!-- <td> <obs conceptId="186" class="obsToDisableEsp"/></td> -->
			<td class ="hidden"><encounterProvider default="currentUser"/></td>
		</tr>

		<ifMode mode="ENTER">
			<td ><lookup complexExpression="#set( $location = $patient.patientIdentifier.location )
			&lt;script type=&quot;text/javascript&quot;>
				$j(function () {
					setValue('encounterloc.value','$location');
				});
			&lt;/script>"/>
			</td>
		</ifMode>
		<td class="hidden" ><encounterLocation  id="encounterloc" /></td>

		<td>Departamento:</td>
		<td><lookup class="value" expression="patient.addresses.first().stateProvince"/></td>

		<td>Municipio:</td>
		<td><lookup class="value" expression="patient.addresses.first().cityVillage"/></td>

		<td>Distrito:</td>
		<td><lookup class="value" expression="patient.addresses.first().countyDistrict"/></td>

		<td>Jurisdicción:</td>
		<td><lookup class="value" expression="patient.addresses.first().address1"/></td>

		<td>Comunidad:</td>
		<td><lookup class="value" expression="patient.addresses.first().address2"/></td>

	</table>
</section>
<section headerLabel="2. Parto">
	<table class="baseline-aligned">
		<tr>
			<td>Via de Parto:
				<obs conceptId="140" class="obsToDisableEsp"/>
			</td>
		</tr>
		<tr>
			<td>Estado Recien Nacido:
				<obs conceptId="144" class="obsToDisableEsp"/>
			</td>
		</tr>
		<tr>
			<td>Lugar de Parto:
				<obs conceptId="152" answerConceptIds="145,246,146,147,148,149,150,151,247" answerLabels="Centro de salud,Hospital distrital, Hospital Regional,Hospital de referencia nacional,En domicilio atendido por comadrona,En domicilio atendido por facilitador,En domicilio atendido por médico,En domicilio atendido por enfermera profesional, En domicilio atendido por auxiliar de enfermería" class="obsToDisableEsp"/>
			</td>
		</tr>
		<tr>
			<td>Comentarios Parto:
			</td>
		</tr>
		<tr>
			<td>
				<obs conceptId="153" rows="4" cols="23" class="obsToDisableEsp"/>
			</td>
		</tr>
	</table>
</section>
<section headerLabel="3. Rellenar por el especialista">
	<table class="baseline-aligned" id="enfermera">
		<tr>
			<td> Correcciones en el formulario: </td>
		</tr>
		<tr>
			<td> <obs conceptId="161" rows="5" cols="50" class="obsToDisableAll"/> </td>
		</tr>
	</table>
</section>
<submit class="obsToDisableSubmit"/>
</htmlform>
